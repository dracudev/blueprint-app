<section class="dashboard-section" data-tab="clients">
  <div class="dashboard-table-header">
    <h2>Clients</h2>
    <% if (user.role === 'admin' && user.canCreateClients) { %>
    <a
      href="/dashboard?action=create&entity=client&tab=clients"
      class="btn btn-primary btn-md"
      >Add New Client</a
    >
    <% } %>
  </div>
  <table class="dashboard-table dashboard-table-main">
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>

        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% clients.forEach(c => { %>
      <tr>
        <td>
          <% if (c.isCompany) { %>
          <a href="/client/<%= c.clientId %>" class="client-name-link">
            <%= c.companyName %>
          </a>
          <% } else { %>
          <a href="/client/<%= c.clientId %>" class="client-name-link">
            <%= c.firstName %> <%= c.lastName %>
          </a>
          <% } %>
        </td>
        <td><%= c.email %></td>

        <td>
          <% if (user.role === 'admin') { %> <% if (user.canEditClients) { %>
          <a
            href="/dashboard?action=edit&entity=client&id=<%= c.clientId %>&tab=clients"
            class="btn btn-secondary btn-md crud-btn"
            data-action="edit"
            data-entity="client"
            data-id="<%= c.clientId %>"
            >Edit</a
          >
          <% } %> <% if (user.canDeleteClients) { %>
          <button
            type="button"
            class="btn btn-danger btn-md crud-btn"
            data-action="delete"
            data-entity="client"
            data-id="<%= c.clientId %>"
          >
            Delete
          </button>
          <% } %> <% } %>
        </td>
      </tr>
      <% }) %>
    </tbody>
  </table>
</section>
